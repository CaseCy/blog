<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('https://cononyc.gitee.io').hostname,
    root: '/',
    scheme: 'Mist',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":false,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="A Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Me">
<meta property="og:url" content="https://cononyc.gitee.io/page/3/index.html">
<meta property="og:site_name" content="Me">
<meta property="og:description" content="A Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="C.c">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://cononyc.gitee.io/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Me</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Me</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/23/docker-%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/23/docker-%E5%AE%B9%E5%99%A8%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url"> docker 容器常用命令		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-23 15:57:52" itemprop="dateCreated datePublished" datetime="2018-10-23T15:57:52+08:00">2018-10-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考和引用：<a target="_blank" rel="noopener" href="http://itmuch.com/docker/05-docker-command-containers/">容器常用命令</a></p>
<h2 id="新建并启动容器-重要"><a href="#新建并启动容器-重要" class="headerlink" title="新建并启动容器[重要]"></a>新建并启动容器[重要]</h2><p>一些常用的选项</p>
<ul>
<li>-d：表示后台运行</li>
<li>-P：随机映射一个容器的端口(如果EXPOSE有声明，就是声明的端口)</li>
<li>-p：指定端口映射</li>
</ul>
<ol>
<li>ip:hostPort:containerPort</li>
<li>ip::containerPort</li>
<li>hostPort:containerPort</li>
<li>containerPort</li>
</ol>
<ul>
<li>–network选项：指定网络模式，该选项有以下可选参数：</li>
</ul>
<ol>
<li>–network=bridge： 默认选项，表示连接到默认的网桥。</li>
<li>–network=host：容器使用宿主机的网络。</li>
<li>–network=container:NAME_or_ID：告诉Docker让新建的容器使用已有容器的网络配置。</li>
<li>–network=none：不配置该容器的网络，用户可自定义网络配置。</li>
</ol>
<ul>
<li>–name: 指定启动容器的名称</li>
<li>-v 挂载主机的目录到容器<br>-v /usr:/abc<br>将主机的/abc目录挂载到容器的/usr<br>eg：<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">91</span>:<span class="number">80</span> nginx</span><br></pre></td></tr></table></figure>
注：<br>需要注意的是，使用docker run命令创建容器时，会先检查本地是否存在指定镜像。如果本地不存在该名称的镜像，Docker就会自动从Docker Hub下载镜像并启动一个Docker容器。</li>
</ul>
<h2 id="列出容器-重要"><a href="#列出容器-重要" class="headerlink" title="列出容器[重要]"></a>列出容器[重要]</h2><p>使用docker ps 命令即可列出运行中的容器。执行该命令后，可看到类似于如下的表格。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                         NAMES</span><br><span class="line">784fd3b294d7        nginx               <span class="string">&quot;nginx -g &#x27;daemon off&quot;</span>   <span class="number">20</span> minutes ago      Up <span class="number">2</span> seconds        <span class="number">443</span>/tcp, <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span>:<span class="number">91</span>-&gt;<span class="number">80</span>/tcp   backstabbing_archimedes</span><br></pre></td></tr></table></figure>

<p>如需列出所有容器（包括已停止的容器），可使用-a参数。</p>
<p>该表格包含了七列，含义如下：</p>
<p>① CONTAINER_ID：表示容器ID。</p>
<p>② IMAGE：表示镜像名称。</p>
<p>③ COMMAND：表示启动容器时运行的命令。</p>
<p>④ CREATED：表示容器的创建时间。</p>
<p>⑤ STATUS：表示容器运行的状态。Up表示运行中，Exited表示已停止。</p>
<p>⑥ PORTS：表示容器对外的端口号。</p>
<p>⑦ NAMES：表示容器名称。该名称默认由Docker自动生成，也可使用docker run命令的–name选项自行指定。</p>
<p>命令格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps [OPTIONS]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--all, -a</code></td>
<td><code>false</code></td>
<td>列出所有容器，包括未运行的容器，默认只展示运行的容器</td>
</tr>
<tr>
<td><code>--filter, -f</code></td>
<td></td>
<td>根据条件过滤显示内容</td>
</tr>
<tr>
<td><code>--format</code></td>
<td></td>
<td>通过Go语言模板文件展示镜像</td>
</tr>
<tr>
<td><code>--last, -n</code></td>
<td><code>-1</code></td>
<td>显示最近创建n个容器（包含所有状态）</td>
</tr>
<tr>
<td><code>--latest, -l</code></td>
<td><code>false</code></td>
<td>显示最近创建的容器（包含所有状态）</td>
</tr>
<tr>
<td><code>--no-trunc</code></td>
<td><code>false</code></td>
<td>不截断输出</td>
</tr>
<tr>
<td><code>--quiet, -q</code></td>
<td><code>false</code></td>
<td>静默模式，只展示容器的编号</td>
</tr>
<tr>
<td><code>--size, -s</code></td>
<td><code>false</code></td>
<td>显示总文件大小</td>
</tr>
</tbody></table>
<h2 id="停止容器-重要"><a href="#停止容器-重要" class="headerlink" title="停止容器[重要]"></a>停止容器[重要]</h2><p>使用<code>docker stop</code> 命令，即可停止容器<br>命令格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--time, -t</code></td>
<td><code>10</code></td>
<td>强制杀死容器前等待的时间，单位是秒</td>
</tr>
</tbody></table>
<p>eg:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop 784fd3b294d7</span><br></pre></td></tr></table></figure>
<p>其中784fd3b294d7 是容器ID，当然也可使用docker stop 容器名称 来停止指定容器<br>强制停止容器[重要]<br>可使用<code>docker kill</code> 命令停止一个或更多运行着的容器<br>命令格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker kill [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--signal, -s</code></td>
<td><code>KILL</code></td>
<td>向容器发送一个信号</td>
</tr>
</tbody></table>
<h2 id="启动已停止的容器-重要"><a href="#启动已停止的容器-重要" class="headerlink" title="启动已停止的容器[重要]"></a>启动已停止的容器[重要]</h2><p>使用<code>docker run</code>命令，即可新建并启动一个容器。对于已停止的容器，可使用<code>docker start</code> 命令来启动。<br>命令格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--attach, -a</code></td>
<td><code>false</code></td>
<td>连接STDOUT/STDERR并转发信号</td>
</tr>
<tr>
<td><code>--checkpoint</code></td>
<td></td>
<td>从该检查点还原</td>
</tr>
<tr>
<td><code>--checkpoint-dir</code></td>
<td></td>
<td>使用自定义的检查点存储目录</td>
</tr>
<tr>
<td><code>--detach-keys</code></td>
<td></td>
<td>覆盖断开容器的关键顺序</td>
</tr>
<tr>
<td><code>--interactive, -i</code></td>
<td><code>false</code></td>
<td>连接容器的STDIN</td>
</tr>
</tbody></table>
<h2 id="重启容器-重要"><a href="#重启容器-重要" class="headerlink" title="重启容器[重要]"></a>重启容器[重要]</h2><p>可使用<code>docker restart</code>命令来重启容器。该命令实际上是先执行了<code>docker stop</code>命令，然后执行了<code>docker start</code>命令。<br>命令格式：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--time, -t</code></td>
<td><code>10</code></td>
<td>关闭容器前等待的时间，单位是秒</td>
</tr>
</tbody></table>
<h2 id="进入容器-重要"><a href="#进入容器-重要" class="headerlink" title="进入容器[重要]"></a>进入容器[重要]</h2><p>某场景下，我们可能需要进入运行中的容器。</p>
<p>① 使用docker attach 命令进入容器。</p>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker attach 784fd3b294d7</span><br></pre></td></tr></table></figure>
<p>很多场景下，使用<code>docker attach</code>命令并不方便。当多个窗口同时attach到同一个容器时，所有窗口都会同步显示。同理，如果某个窗口发生阻塞，其他窗口也无法执行操作。<br>② 使用<code>nsenter</code>进入容器<br>nsenter工具包含在util-linux 2.23或更高版本中。为了连接到容器，我们需要找到容器第一个进程的PID，可通过以下命令获取</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect --format &quot;&#123;&#123;.State.Pid&#125;&#125;&quot; $CONTAINER_ID</span><br></pre></td></tr></table></figure>
<p>获得PID后，就可使用nsenter命令进入容器了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nsenter --target &quot;$PID&quot; --mount --uts --ipc --net --pid</span><br></pre></td></tr></table></figure>
<p>读者也可将以上两条命令封装成一个Shell，从而简化进入容器的过程<br>③ docker exec</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器id /bin/bash</span><br></pre></td></tr></table></figure>
<h3 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h3><p>①在容器中输入<code>exit;</code><br>②ctrl+p+q</p>
<h2 id="删除容器-重要"><a href="#删除容器-重要" class="headerlink" title="删除容器[重要]"></a>删除容器[重要]</h2><p>使用<code>docker rm</code>命令即可删除指定容器。<br>命令格式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--force, -f</code></td>
<td><code>false</code></td>
<td>通过SIGKILL信号强制删除正在运行中的容器</td>
</tr>
<tr>
<td><code>--link, -l</code></td>
<td><code>false</code></td>
<td>删除容器间的网络连接</td>
</tr>
<tr>
<td><code>--volumes, -v</code></td>
<td><code>false</code></td>
<td>删除与容器关联的卷</td>
</tr>
</tbody></table>
<p>例1：删除指定容器。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm 784fd3b294d7</span><br></pre></td></tr></table></figure>
<p>该命令只能删除已停止的容器，如需删除正在运行的容器，可使用-f参数。<br>例2：删除所有的容器。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm -f $(docker ps -a -q)</span><br></pre></td></tr></table></figure>

<h2 id="导出容器"><a href="#导出容器" class="headerlink" title="导出容器"></a>导出容器</h2><p>将容器导出成一个压缩包文件。<br>命令格式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export [OPTIONS] CONTAINER</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--output, -o</code></td>
<td></td>
<td>将内容写到文件而非STDOUT</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker export red_panda &gt; latest.tar</span><br><span class="line">docker export --output=&quot;latest.tar&quot; red_panda</span><br></pre></td></tr></table></figure>
<h2 id="导入容器"><a href="#导入容器" class="headerlink" title="导入容器"></a>导入容器</h2><p>使用<code>docker import</code>命令即可从归档文件导入内容并创建镜像。<br>命令格式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import [OPTIONS] file|URL|- [REPOSITORY[:TAG]]</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<table>
<thead>
<tr>
<th>Name, shorthand</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>--change, -c</code></td>
<td></td>
<td>将Dockerfile指令应用到创建的镜像</td>
</tr>
<tr>
<td><code>--message, -m</code></td>
<td></td>
<td>为导入的镜像设置提交信息</td>
</tr>
</tbody></table>
<p>示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import nginx2.tar nginx</span><br></pre></td></tr></table></figure>
<p>拓展阅读</p>
<ul>
<li>Docker的网络：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/userguide/networking/">https://docs.docker.com/engine/userguide/networking/</a></li>
<li>Docker命令：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/commandline/docker/">https://docs.docker.com/engine/reference/commandline/docker/</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/22/dockerfile/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/22/dockerfile/" class="post-title-link" itemprop="url"> DockerFile		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-22 17:07:52" itemprop="dateCreated datePublished" datetime="2018-10-22T17:07:52+08:00">2018-10-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考及引用：<a target="_blank" rel="noopener" href="http://itmuch.com/docker/07-docker-docker-file/">Dockerfile指令详解</a></p>
<h2 id="FROM-指定基础镜像"><a href="#FROM-指定基础镜像" class="headerlink" title="FROM 指定基础镜像"></a>FROM 指定基础镜像</h2><p>使用FROM指令指定基础镜像，FROM指令有点像Java里面的“extends”关键字。需要注意的是，FROM指令必须指定且需要写在其他指令之前。FROM指令后的所有指令都依赖于该指令所指定的镜像。<br>支持三种格式：</p>
<ul>
<li><code>FROM &lt;image&gt;</code></li>
<li><code>FROM &lt;image&gt;:&lt;tag&gt;</code></li>
<li><code>FROM &lt;image&gt;@&lt;digest&gt;</code><h2 id="ADD-复制文件"><a href="#ADD-复制文件" class="headerlink" title="ADD 复制文件"></a>ADD 复制文件</h2>ADD指令用于复制文件，格式为：</li>
<li><code>ADD &lt;src&gt;... &lt;dest&gt;</code></li>
<li><code>ADD [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]</code><br>从src目录复制文件到容器的dest。其中src可以是Dockerfile所在目录的相对路径，也可以是一个URL，还可以是一个压缩包<br>注：</li>
</ul>
<ol>
<li>如果src是一个url，以/会被视为一个目录，不以/结尾视为文件</li>
<li>如果src是一个目录，那么整个目录下的内容将会被拷贝，包括文件系统元数据。</li>
<li>如果文件是可识别的压缩包格式，则docker会自动解压。</li>
<li>src必须在构建的上下文内，不能使用例如：ADD ../somethine /something 这样的命令，因为docker build 命令首先会将上下文路径和其子目录发送到docker daemon。<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ADD abc.jar def.jar</span><br></pre></td></tr></table></figure>
<h2 id="COPY-复制文件"><a href="#COPY-复制文件" class="headerlink" title="COPY 复制文件"></a>COPY 复制文件</h2>复制文件，格式为：</li>
</ol>
<ul>
<li><code>COPY &lt;src&gt;... &lt;dest&gt;</code></li>
<li><code>COPY [&quot;&lt;src&gt;&quot;,... &quot;&lt;dest&gt;&quot;]</code><br>复制本地端的src到容器的dest。COPY指令和ADD指令类似，COPY不支持URL和压缩包。<h2 id="ARG-设置构建参数"><a href="#ARG-设置构建参数" class="headerlink" title="ARG 设置构建参数"></a>ARG 设置构建参数</h2>ARG指令用于设置构建参数，类似于ENV。和ARG不同的是，ARG设置的是构建时的环境变量，在容器运行时是不会存在这些变量的。</li>
</ul>
<p>格式为：</p>
<ul>
<li><code>ARG &lt;name&gt;[=&lt;default value&gt;]</code><h2 id="ENV-设置环境变量"><a href="#ENV-设置环境变量" class="headerlink" title="ENV 设置环境变量"></a>ENV 设置环境变量</h2>ENV指令用于设置环境变量，格式为：</li>
<li><code>ENV &lt;key&gt; &lt;value&gt;</code></li>
<li><code>ENV &lt;key&gt;=&lt;value&gt; ...</code><br>示例：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENV JAVA_HOME /path/to/java</span><br></pre></td></tr></table></figure>
<h3 id="ENV-和-ARG区别"><a href="#ENV-和-ARG区别" class="headerlink" title="ENV 和 ARG区别"></a>ENV 和 ARG区别</h3>参考：<a target="_blank" rel="noopener" href="http://scmroad.com/topics/39188">http://scmroad.com/topics/39188</a></li>
<li><code>The ARG instruction defines a variable that users can pass at build-time to the builder with the docker build command using the --build-arg = flag.</code><br>ARG指令定义了用户可以在编译时或者运行时传递的变量，如使用如下命令： <code>--build-arg &lt;varname&gt;=&lt;value&gt;</code></li>
<li><code>The ENV instruction sets the environment variable to the value .</code><br>The environment variables set using ENV will persist when a container is run from the resulting image.<br>ENV指令是在dockerfile里面设置环境变量，不能在编译时或运行时传递。<br>有效结合：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ARG var</span><br><span class="line">ENV var=$&#123;var&#125;</span><br></pre></td></tr></table></figure>
You can then either build an image with a specific var value at build-time (docker build –build-arg var=xxx), or run a container with a specific runtime value (docker run -e var=yyy)</li>
</ul>
<h2 id="ENTRYPOINT-入口点"><a href="#ENTRYPOINT-入口点" class="headerlink" title="ENTRYPOINT 入口点"></a>ENTRYPOINT 入口点</h2><p>格式为：</p>
<ul>
<li><code>ENTRYPOINT [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code></li>
<li><code>ENTRYPOINT command param1 param2</code><br>ENTRYPOINT和CMD指令的目的一样，都是指定Docker容器启动时执行的命令，可多次设置，但只有最后一个有效。ENTRYPOINT不可被重写覆盖。<h2 id="CMD-容器启动命令"><a href="#CMD-容器启动命令" class="headerlink" title="CMD 容器启动命令"></a>CMD 容器启动命令</h2>CMD指令用于为执行容器提供默认值。每个Dockerfile只有一个CMD命令，如果指定了多个CMD命令，那么只有最后一条会被执行，如果启动容器的时候指定了运行的命令，则会覆盖掉CMD指定的命令。<br>支持三种格式：</li>
<li><code>CMD [&quot;executable&quot;,&quot;param1&quot;,&quot;param2&quot;] (推荐使用)</code></li>
<li><code>CMD [&quot;param1&quot;,&quot;param2&quot;] (为ENTRYPOINT指令提供预设参数)</code></li>
<li><code>CMD command param1 param2 (在shell中执行)</code><br>示例：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD echo &quot;This is a test.&quot; | wc -</span><br></pre></td></tr></table></figure>
<h2 id="RUN-执行命令"><a href="#RUN-执行命令" class="headerlink" title="RUN 执行命令"></a>RUN 执行命令</h2>该指令支持两种格式：</li>
<li><code>RUN &lt;command&gt;</code></li>
<li><code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code><br><code>RUN &lt;command&gt;</code>在shell终端中运行，在Linux中默认是/bin/sh -c ，在Windows中是 cmd /s /c ，使用这种格式，就像直接在命令行中输入命令一样。<br><code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code> 使用exec执行，这种方式类似于函数调用。指定其他终端可以通过该方式操作，例如：RUN [“/bin/bash”, “-c”, “echo hello”] ，该方式必须使用双引号[“]而不能使用单引号[‘]，因为该方式会被转换成一个JSON 数组。<h3 id="CMD-ENTRYPOINT-RUN区别"><a href="#CMD-ENTRYPOINT-RUN区别" class="headerlink" title="CMD/ENTRYPOINT/RUN区别"></a>CMD/ENTRYPOINT/RUN区别</h3>参考:<a target="_blank" rel="noopener" href="https://segmentfault.com/q/1010000000417103">https://segmentfault.com/q/1010000000417103</a><br>个人理解：<br>ENTRYPOINT 相当于设置初始值<br>CMD 相当于覆盖初始值<blockquote>
<p>RUN是在Build时运行的，先于CMD和ENTRYPOINT。Build完成了，RUN也运行完成后，再运行CMD或者ENTRYPOINT</p>
</blockquote>
</li>
</ul>
<h2 id="EXPOSE-声明暴露的端口"><a href="#EXPOSE-声明暴露的端口" class="headerlink" title="EXPOSE 声明暴露的端口"></a>EXPOSE 声明暴露的端口</h2><p>EXPOSE指令用于声明在运行时容器提供服务的端口，格式为：</p>
<ul>
<li><code>EXPOSE &lt;port&gt; [&lt;port&gt;...]</code><br>需要注意的是，这只是一个声明，运行时并不会因为该声明就打开相应端口。该指令的作用主要是帮助镜像使用者理解该镜像服务的守护端口；其次是当运行时使用随机映射时，会自动映射EXPOSE的端口。示例：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 声明暴露一个端口示例</span></span><br><span class="line">EXPOSE port1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 相应的运行容器使用的命令</span></span><br><span class="line">docker run -p port1 image</span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可使用-P选项启动</span></span><br><span class="line">docker run -P image</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 声明暴露多个端口示例</span></span><br><span class="line">EXPOSE port1 port2 port3</span><br><span class="line"><span class="meta">#</span><span class="bash"> 相应的运行容器使用的命令</span></span><br><span class="line">docker run -p port1 -p port2 -p port3 image</span><br><span class="line"><span class="meta">#</span><span class="bash"> 也可指定需要映射到宿主机器上的端口号</span>  </span><br><span class="line">docker run -p host_port1:port1 -p host_port2:port2 -p host_port3:port3 image</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="USER-设置用户"><a href="#USER-设置用户" class="headerlink" title="USER 设置用户"></a>USER 设置用户</h2><p>该指令用于设置启动镜像时的用户或者UID，写在该指令后的RUN、CMD以及ENTRYPOINT指令都将使用该用户执行命令。<br>格式为：</p>
<ul>
<li><code>USER 用户名</code><h2 id="VOLUME-指定挂载点"><a href="#VOLUME-指定挂载点" class="headerlink" title="VOLUME 指定挂载点"></a>VOLUME 指定挂载点</h2>该指令使容器中的一个目录具有持久化存储的功能，该目录可被容器本身使用，也可共享给其他容器。当容器中的应用有持久化数据的需求时可以在Dockerfile中使用该指令。格式为</li>
<li><code>VOLUME [&quot;/data&quot;]</code><br>使用示例：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line">VOLUME /tmp</span><br></pre></td></tr></table></figure>
当该Dockerfile被构建成镜像后，/tmp目录中的数据即使容器关闭也依然存在。如果另一个容器也有持久化的需求，并且想使用以上容器/tmp目录中的内容，则可使用如下命令启动容器：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -volume-from 容器ID 镜像名称  # 容器ID是di一个容器的ID，镜像是第二个容器所使用的镜像。</span><br></pre></td></tr></table></figure>
<h2 id="WORKDIR-指定工作目录"><a href="#WORKDIR-指定工作目录" class="headerlink" title="WORKDIR 指定工作目录"></a>WORKDIR 指定工作目录</h2>格式为：</li>
<li><code>WORKDIR /path/to/workdir</code><br>切换目录指令，类似于cd命令，写在该指令后的RUN，CMD以及ENTRYPOINT指令都将该目录作为当前目录，并执行相应的命令。<br>Dockerfile还有一些其他的指令，例如STOPSINGAL、HEALTHCHECK、SHELL等。由于并不是很常用，本书不作赘述。有兴趣的读者可前往<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a> 扩展阅读。</li>
</ul>
<h2 id="LABEL-为镜像添加元数据"><a href="#LABEL-为镜像添加元数据" class="headerlink" title="LABEL 为镜像添加元数据"></a>LABEL 为镜像添加元数据</h2><p>LABEL指令用于为镜像添加元数据。<br>格式为：</p>
<ul>
<li><code>LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</code><br>使用 “”和”&quot;转换命令行，示例：<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LABEL &quot;com.example.vendor&quot;=&quot;ACME Incorporated&quot;</span><br><span class="line">LABEL com.example.label-with-value=&quot;foo&quot;</span><br><span class="line">LABEL version=&quot;1.0&quot;</span><br><span class="line">LABEL description=&quot;This text illustrates \</span><br><span class="line">that label-values can span multiple lines.&quot;</span><br></pre></td></tr></table></figure>
<h2 id="MAINTAINER-指定维护者的信息（已过时）"><a href="#MAINTAINER-指定维护者的信息（已过时）" class="headerlink" title="MAINTAINER 指定维护者的信息（已过时）"></a>MAINTAINER 指定维护者的信息（已过时）</h2>MAINTAINER指令用于指定维护者的信息，用于为Dockerfile署名<br>格式为：</li>
<li><code>MAINTAINER &lt;name&gt;</code><br>该指令已过时，建议使用如下形式：<br><code>LABEL maintainer=&quot;SvenDowideit@home.org.au&quot;</code><h2 id="拓展阅读"><a href="#拓展阅读" class="headerlink" title="拓展阅读"></a>拓展阅读</h2></li>
<li>Dockerfile官方文档：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/reference/builder/#dockerfile-reference">https://docs.docker.com/engine/reference/builder/#dockerfile-reference</a></li>
<li>Dockerfile最佳实践：<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache">https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/#build-cache</a></li>
<li>例子参考<br><a target="_blank" rel="noopener" href="http://blog.51cto.com/zero01/2069879">http://blog.51cto.com/zero01/2069879</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34409701/article/details/79949401">https://blog.csdn.net/qq_34409701/article/details/79949401</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/log4j%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/log4j%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url"> log4j配置		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 10:23:08" itemprop="dateCreated datePublished" datetime="2018-10-19T10:23:08+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index">
                    <span itemprop="name">配置相关</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>引用：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/ITtangtang/p/3926665.html">log4j配置</a><br>参考：<a target="_blank" rel="noopener" href="http://www.cnblogs.com/shenliang123/archive/2012/05/02/2479286.html">玩转log4j</a></p>
<hr>
<h2 id="组成部分"><a href="#组成部分" class="headerlink" title="组成部分"></a>组成部分</h2><p>log4j由三个部分组成</p>
<pre><code>Loggers(记录器)，Appenders (输出源)和Layouts(布局)</code></pre><p>log4j的日志被分为了几个级别，对应的级别及关系：</p>
<pre><code>DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL</code></pre><p>注：log4j输出日志的时候，只会输出和设定等级相等和比设定等级高的Log</p>
<h3 id="常用的Logger"><a href="#常用的Logger" class="headerlink" title="常用的Logger"></a>常用的Logger</h3><pre><code>org.apache.log4j.ConsoleAppender（控制台）
org.apache.log4j.FileAppender（文件）
org.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件）
org.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件）
org.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</code></pre><h3 id="常用的Layout"><a href="#常用的Layout" class="headerlink" title="常用的Layout"></a>常用的Layout</h3><pre><code>org.apache.log4j.HTMLLayout（以HTML表格形式布局）
org.apache.log4j.PatternLayout（可以灵活地指定布局模式）
org.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串）
org.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等信息）</code></pre><hr>
<h2 id="配置及语法"><a href="#配置及语法" class="headerlink" title="配置及语法"></a>配置及语法</h2><p>Log4j支持两种配置文件格式，一种是XML格式的文件，一种是properties属性文件，这里使用properites</p>
<h3 id="配置根Logger"><a href="#配置根Logger" class="headerlink" title="配置根Logger"></a>配置根Logger</h3><pre><code>log4j.rootLogger = [ level ] , appenderName1, appenderName2, …
log4j.additivity.org.apache=false：表示Logger不会在父Logger的appender里输出，默认为true。</code></pre><p>这里的appenderName可以自己定义，但是要在后面的配置中也使用<br>level表示输出日志的等级，log4j只建议使用ERROR、WARN、INFO、DEBUG（从高到低）<br>使用范例：</p>
<pre><code>lo4j.rootLoger = DEBUG,a,b,c</code></pre><h3 id="配置日志输出位置-appender"><a href="#配置日志输出位置-appender" class="headerlink" title="配置日志输出位置(appender)"></a>配置日志输出位置(appender)</h3><pre><code>log4j.appender.appenderName = className</code></pre><p><code>className对应上面几种常用的Logger,appenderName对应根Logger的appenderName,以下不赘述</code><br>范例：</p>
<pre><code>log4j.appender.a = org.apache.log4j.ConsoleAppender</code></pre><p>几种Logger都有的属性</p>
<pre><code>Threshold=WARN：指定日志信息的最低输出级别，默认为DEBUG。
ImmediateFlush=true：表示所有消息都会被立即输出，设为false则不输出，默认值是true。</code></pre><p>FileAppender，DailyRollingFileAppender，RollingFileAppender都有的属性</p>
<pre><code>Append=false：true表示消息增加到指定文件中，false则将消息覆盖指定的文件内容，默认值是true。
File=D:/logs/logging.log4j：指定消息输出到logging.log4j文件中。</code></pre><p>特有属性：</p>
<ul>
<li><code>ConsoleAppender</code><br> Target=System.err：默认值是System.out</li>
<li><code>DailyRollingFileAppender</code><br> DatePattern=’.’yyyy-MM：每月滚动一次日志文件，即每月产生一个新的日志文件。当前月的日志文件名为logging.log4j，前一个月的日志文件名为logging.log4j.yyyy-MM。<br> 另外，也可以指定按周、天、时、分等来滚动日志文件，对应的格式如下：<br> 1)’.’yyyy-MM：每月<br> 2)’.’yyyy-ww：每周<br> 3)’.’yyyy-MM-dd：每天<br> 4)’.’yyyy-MM-dd-a：每天两次<br> 5)’.’yyyy-MM-dd-HH：每小时<br> 6)’.’yyyy-MM-dd-HH-mm：每分钟</li>
<li><code>RollingFileAppender</code><br> MaxFileSize=100KB：后缀可以是KB,MB或者GB。在日志文件到达该大小时，将会自动滚动，即将原来的内容移到logging.log4j.1文件中。<br> MaxBackupIndex=2：指定可以产生的滚动文件的最大数，例如，设为2则可以产生logging.log4j.1，logging.log4j.2两个滚动文件和一个logging.log4j文件。</li>
</ul>
<p>范例：</p>
<pre><code>log4j.appender.a.Target = System.err
log4j.appender.a.Threshold = DEBUG</code></pre><h3 id="配置输出的形式-格式（Layout）"><a href="#配置输出的形式-格式（Layout）" class="headerlink" title="配置输出的形式/格式（Layout）"></a>配置输出的形式/格式（Layout）</h3><pre><code>log4j.appender.appenderName.layout=className</code></pre><p>这里的className指的是上面常用的Layout，以下不赘述<br>参数设置：</p>
<ul>
<li><p><code>HTMLLayout</code><br> LocationInfo=true：输出java文件名称和行号，默认值是false。<br>  Title=My Logging： 默认值是Log4J Log Messages。</p>
</li>
<li><p><code>PatternLayout</code><br> ConversionPattern=%m%n：设定以怎样的格式显示消息。</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">格式化符号说明：</span><br><span class="line"></span><br><span class="line">%p：输出日志信息的优先级，即DEBUG，INFO，WARN，ERROR，FATAL。</span><br><span class="line">%d：输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，如：%d&#123;yyyy/MM/dd HH:mm:ss,SSS&#125;。</span><br><span class="line">%r：输出自应用程序启动到输出该<span class="keyword">log</span>信息耗费的毫秒数。</span><br><span class="line">%t：输出产生该日志事件的线程名。</span><br><span class="line">%l：输出日志事件的发生位置，相当于%c.%M(%F:%L)的组合，包括类全名、方法、文件名以及在代码中的行数。例如：test.TestLog4j.main(TestLog4j.java:<span class="number">10</span>)。</span><br><span class="line">%c：输出日志信息所属的类目，通常就是所在类的全名。</span><br><span class="line">%M：输出产生日志信息的方法名。</span><br><span class="line">%F：输出日志消息产生时所在的文件名称。</span><br><span class="line">%L:：输出代码中的行号。</span><br><span class="line">%m:：输出代码中指定的具体日志信息。</span><br><span class="line">%n：输出一个回车换行符，Windows平台为<span class="string">&quot;rn&quot;</span>，Unix平台为<span class="string">&quot;n&quot;</span>。</span><br><span class="line">%x：输出和当前线程相关联的NDC(嵌套诊断环境)，尤其用到像java servlets这样的多客户多线程的应用中。</span><br><span class="line">%%：输出一个<span class="string">&quot;%&quot;</span>字符。</span><br><span class="line">另外，还可以在%与格式字符之间加上修饰符来控制其最小长度、最大长度、和文本的对齐方式。如：</span><br><span class="line"><span class="number">1</span>) c：指定输出category的名称，最小的长度是<span class="number">20</span>，如果category的名称长度小于<span class="number">20</span>的话，默认的情况下右对齐。</span><br><span class="line"><span class="number">2</span>)%-<span class="number">20</span>c：<span class="string">&quot;-&quot;</span>号表示左对齐。</span><br><span class="line"><span class="number">3</span>)%.<span class="number">30</span>c：指定输出category的名称，最大的长度是<span class="number">30</span>，如果category的名称长度大于<span class="number">30</span>的话，就会将左边多出的字符截掉，但小于<span class="number">30</span>的话也不会补空格。</span><br></pre></td></tr></table></figure>
<p>范例:</p>
<p> log4j.appender.c.layout=org.apache.log4j.PatternLayout<br> log4j.appender.c.layout.ConversionPattern=[%-5p] [%d{yyyy-MM-dd HH:mm:ss}][%t] %c - %x %m%n</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="特定类输出不同个log"><a href="#特定类输出不同个log" class="headerlink" title="特定类输出不同个log"></a>特定类输出不同个log</h3><p>在Java类中说明</p>
<p> private static Log logger = LogFactory.getLog(Test.class);<br>说明：这里的LogFactory是<code>commons-logging</code>包中的，这个包不是Log4j的，是一个日志通用包，Log4j实现了其中的接口，这里通过LogFactory来获得日志对象，以后更改的时候会比较方便<br>然后在log4j.properties中加入:</p>
<p> log4j.logger.cn.com.Test= DEBUG, test<br> log4j.appender.test=org.apache.log4j.FileAppender<br> log4j.appender.test.File=${myweb.root}/WEB-INF/log/test.log<br> log4j.appender.test.layout=org.apache.log4j.PatternLayout<br> log4j.appender.test.layout.ConversionPattern=%d %p [%c] - %m%n</p>
<h3 id="同一个类输出多个log"><a href="#同一个类输出多个log" class="headerlink" title="同一个类输出多个log"></a>同一个类输出多个log</h3><p>Java类中：</p>
<p> private static Log logger = LogFactory.getLog(“test”);<br> private static Log logger = LogFactory.getLog(“test1”);<br>log4j.properties中加入:</p>
<p> log4j.logger.test= DEBUG, test<br> …配置信息略去</p>
<p> log4j.logger.test1= DEBUG, test1<br> …配置信息略去</p>
</li>
</ul>
<blockquote>
<p>这些自定义的日志默认是同时输出到log4j.rootLogger所配置的日志中的，通过设置下面的属性可以更改<br>log4j.additivity.test1 = false<br>　　它用来设置是否同时输出到log4j.rootLogger所配置的日志中，设为false就不会输出到其它地方啦注意这里的”test1”是在程序中给logger起的那个自定义的名字！<br>如果你说，我只是不想同时输出这个日志到log4j.rootLogger所配置的logfile中，stdout里我还想同时输出呢！那也好办，把你的log4j.logger.myTest1 = DEBUG, test1改为下式就OK啦！ log4j.logger.test1=DEBUG, test1</p>
</blockquote>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>在<code>src</code>等级的目录下新建文件<code>log4j.properties</code>将配置写入就可以使用了</p>
<hr>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#设置根级别</span><br><span class="line">#a为控制台输出。b为日志输出。c为错误日志</span><br><span class="line">#DEBUG &lt; INFO &lt; WARN &lt; ERROR &lt; FATAL</span><br><span class="line">log4j.rootLogger = DEBUG,a,c</span><br><span class="line">################################</span><br><span class="line">#设置每个日志输出的等级</span><br><span class="line">log4j.appender.a.Threshold = DEBUG</span><br><span class="line">#log4j.appender.b.Threshold = INFO</span><br><span class="line">log4j.appender.c.Threshold = ERROR</span><br><span class="line">################################</span><br><span class="line">#设置spring的log级别</span><br><span class="line">log4j.logger.org.springframework=ERROR</span><br><span class="line">################################</span><br><span class="line">#输出</span><br><span class="line">log4j.appender.a = org.apache.log4j.ConsoleAppender</span><br><span class="line">#Target输出的格式。可以写System.err和System.out(默认)</span><br><span class="line">log4j.appender.a.Target = System.out</span><br><span class="line">#指定输出的格式</span><br><span class="line">log4j.appender.a.layout =org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.a.layout.ConversionPattern=[%<span class="number">-5</span>p] %d(%r) --&gt; [%t] %l: %m %x %n</span><br><span class="line">###############################</span><br><span class="line">#输出到日志（文件）</span><br><span class="line">log4j.appender.c = org.apache.log4j.DailyRollingFileAppender</span><br><span class="line">log4j.appender.c.File = $&#123;log.dir&#125;/error.log</span><br><span class="line">#指定输出的格式</span><br><span class="line">log4j.appender.c.layout =org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.c.layout.ConversionPattern=[%<span class="number">-5</span>p] %d(%r) --&gt; [%t] %l: %m %x %n</span><br><span class="line">##################################</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url"> 代理模式		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 10:22:01" itemprop="dateCreated datePublished" datetime="2018-10-19T10:22:01+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82/" itemprop="url" rel="index">
                    <span itemprop="name">杂</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Java原生代理模式"><a href="#Java原生代理模式" class="headerlink" title="Java原生代理模式"></a>Java原生代理模式</h2><p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyBean</span> <span class="keyword">implements</span> <span class="title">ProxyInterface</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String filed = <span class="string">&quot;This is a word for test!!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">proxyMethod</span><span class="params">(String word)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这是一句话：&quot;</span>+word;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">proxyMethod1</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这是一句话：&quot;</span>+word;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getFiled</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> filed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setFiled</span><span class="params">(String filed)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.filed = filed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接口：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ProxyInterface</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">proxyMethod</span><span class="params">(String word)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">proxyMethod1</span><span class="params">(String word)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代理类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyHandler</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">InvocationHandler</span></span>&#123;</span><br><span class="line">    <span class="comment">//被代理的对象</span></span><br><span class="line">    <span class="keyword">private</span> T target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyHandler</span><span class="params">(T target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;invoke执行&quot;</span>);</span><br><span class="line">        System.out.println(method.getName());</span><br><span class="line">        System.out.println(<span class="string">&quot;参数：&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="keyword">return</span> method.invoke(target, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getProxy</span><span class="params">()</span></span>&#123;</span><br><span class="line">        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();    <span class="comment">//获取类加载器</span></span><br><span class="line">        Class&lt;?&gt;[] interfaces = target.getClass().getInterfaces();                          <span class="comment">//获取类的父接口</span></span><br><span class="line">        Object o = Proxy.newProxyInstance(contextClassLoader,interfaces,<span class="keyword">this</span>)</span><br><span class="line">        System.out.println(o <span class="keyword">instanceof</span> ProxyBean); <span class="comment">//false</span></span><br><span class="line">        System.out.println(o <span class="keyword">instanceof</span> ProxyInterface); <span class="comment">//true</span></span><br><span class="line">        <span class="keyword">return</span> (T)o;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Java原生动态代理</span></span><br><span class="line"><span class="comment"> * 目标对象必须实现一个接口，转换的时候，只能以接口的形式转化，需要实现InvocationHandler接口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testProxy</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException </span>&#123;</span><br><span class="line">        Class&lt;?&gt; aClass = Thread.currentThread().getContextClassLoader().loadClass(<span class="string">&quot;cn.ws.proxy.ProxyBean&quot;</span>);</span><br><span class="line">        ProxyBean proxyBean = (ProxyBean) aClass.newInstance();</span><br><span class="line">        ProxyHandler&lt;ProxyInterface&gt; proxyHandler = <span class="keyword">new</span> ProxyHandler(proxyBean);</span><br><span class="line">        ProxyInterface proxy = proxyHandler.getProxy();</span><br><span class="line">        System.out.println(proxy.proxyMethod(<span class="string">&quot;测试&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注：使用Java原生代理的时候，被代理的对象必须是实现一个接口，代理对象强转的时候只能被转换为被代理对象的接口形式。<br>结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">invoke执行</span><br><span class="line">proxyMethod</span><br><span class="line">参数：[测试]</span><br><span class="line">这是一句话：测试</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Cglib代理"><a href="#Cglib代理" class="headerlink" title="Cglib代理"></a>Cglib代理</h2><p>测试对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String filed = <span class="string">&quot;This is a word for test!!&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">proxyMethod</span><span class="params">(String word)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;这是一句话：&quot;</span>+word;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代理对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.Enhancer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.MethodInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.proxy.MethodProxy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Cglib代理</span></span><br><span class="line"><span class="comment"> * 代理的对象（目标对象）可以不用实现接口，Spring里面集成了这个代理，代理类实现MethodInterceptor使用的时候直接使用Spring的包就可以了</span></span><br><span class="line"><span class="comment"> * Java原生的代理类需要实现InvocationHandler这个接口，而且目标对象必须要实现一个接口才可以使用代理模式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &lt;T&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">MethodInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//代理的目标对象</span></span><br><span class="line">    <span class="keyword">private</span> T target;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ProxyFactory</span><span class="params">(T target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">intercept</span><span class="params">(Object o, Method method, Object[] args, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        String superName = methodProxy.getSuperName();</span><br><span class="line">        System.out.println(<span class="string">&quot;代理执行！&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;执行方法：&quot;</span>+method.getName()+<span class="string">&quot; 代理方法：&quot;</span>+methodProxy.getSuperName()+<span class="string">&quot; 参数：&quot;</span>+ Arrays.toString(args));</span><br><span class="line">        <span class="keyword">return</span> method.invoke(target,args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">getProxyInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//1.工具类</span></span><br><span class="line">        Enhancer en = <span class="keyword">new</span> Enhancer();</span><br><span class="line">        <span class="comment">//2.设置父类</span></span><br><span class="line">        en.setSuperclass(target.getClass());</span><br><span class="line">        <span class="comment">//3.设置回调函数</span></span><br><span class="line">        en.setCallback(<span class="keyword">this</span>);</span><br><span class="line">        <span class="comment">//4.创建子类(代理对象)</span></span><br><span class="line">        <span class="keyword">return</span> (T)en.create();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxyTest</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testProxy</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, IllegalAccessException, InstantiationException </span>&#123;</span><br><span class="line">            Class&lt;?&gt; aClass = Thread.currentThread().getContextClassLoader().loadClass(<span class="string">&quot;cn.ws.Cglib.TestBean&quot;</span>);</span><br><span class="line">            TestBean o = (TestBean)aClass.newInstance();</span><br><span class="line">            ProxyFactory&lt;TestBean&gt; proxyFactory = <span class="keyword">new</span> ProxyFactory(o);</span><br><span class="line">            TestBean proxyInstance = proxyFactory.getProxyInstance();</span><br><span class="line">            System.out.println(proxyInstance.proxyMethod(<span class="string">&quot;测试&quot;</span>));</span><br><span class="line">            System.out.println(proxyInstance.getClass());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">代理执行！</span><br><span class="line">执行方法：proxyMethod 代理方法：CGLIB$proxyMethod$<span class="number">0</span> 参数：[测试]</span><br><span class="line">这是一句话：测试</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">cn</span>.<span class="title">ws</span>.<span class="title">Cglib</span>.<span class="title">TestBean</span>$$<span class="title">EnhancerByCGLIB</span>$$1<span class="title">d1cb9da</span></span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/java%E5%AF%B9%E8%B1%A1%E5%92%8Cxml%E7%9A%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/java%E5%AF%B9%E8%B1%A1%E5%92%8Cxml%E7%9A%84%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/" class="post-title-link" itemprop="url"> Java对象和Xml的互相转换		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 10:20:16" itemprop="dateCreated datePublished" datetime="2018-10-19T10:20:16+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82/" itemprop="url" rel="index">
                    <span itemprop="name">杂</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlElement;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlElementWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br></pre></td></tr></table></figure>
<p><code>@XmlRootElement(name = &quot;ROOT&quot;)</code>定义根元素的名字<br><code>@XmlElement(name = &quot;NAME&quot;)</code>定义根元素下面元素的名字，一般写在getter/setter上<br><code>@XmlElementWrapper(name = &quot;HABITLIST&quot;)</code>可以遍历ListT和Set，但是对于map的支持不是很好<br>实体类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlElement;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlElementWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.xml.bind.annotation.XmlRootElement;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@XmlRootElement(name = &quot;ROOT&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">XmlBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;Habit&gt; list;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;NAME&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;AGE&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElementWrapper(name = &quot;HABITLIST&quot;)</span></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;HABIT&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Habit&gt; <span class="title">getList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setList</span><span class="params">(List&lt;Habit&gt; list)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.list = list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">---------------------------------------------------------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Habit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String aboutLife;</span><br><span class="line">    <span class="keyword">private</span> String aboutLern;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;ABOUTLEARN&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAboutLern</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> aboutLern;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAboutLern</span><span class="params">(String aboutLern)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.aboutLern = aboutLern;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getAboutLife</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> aboutLife;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@XmlElement(name = &quot;ABOUTLIFE&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAboutLife</span><span class="params">(String aboutLife)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.aboutLife = aboutLife;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">()</span></span>&#123;</span><br><span class="line">    XmlBean xmlBean = <span class="keyword">new</span> XmlBean();</span><br><span class="line">    xmlBean.setAge(<span class="number">15</span>);</span><br><span class="line">    xmlBean.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Habit habit = <span class="keyword">new</span> Habit();</span><br><span class="line">    habit.setAboutLern(<span class="string">&quot;学习&quot;</span>);</span><br><span class="line">    habit.setAboutLife(<span class="string">&quot;生活&quot;</span>);</span><br><span class="line"></span><br><span class="line">    Habit habit1 = <span class="keyword">new</span> Habit();</span><br><span class="line">    habit1.setAboutLern(<span class="string">&quot;学习1&quot;</span>);</span><br><span class="line">    habit1.setAboutLife(<span class="string">&quot;生活1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    List&lt;Habit&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    list.add(habit);</span><br><span class="line">    list.add(habit1);</span><br><span class="line"></span><br><span class="line">    xmlBean.setList(list);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        String s = beanToXml(xmlBean, XmlBean.class);</span><br><span class="line">        System.out.println(s);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (JAXBException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生成的结果</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ROOT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">AGE</span>&gt;</span>15<span class="tag">&lt;/<span class="name">AGE</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">HABITLIST</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">HABIT</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ABOUTLEARN</span>&gt;</span>学习<span class="tag">&lt;/<span class="name">ABOUTLEARN</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ABOUTLIFE</span>&gt;</span>生活<span class="tag">&lt;/<span class="name">ABOUTLIFE</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">HABIT</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">HABIT</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ABOUTLEARN</span>&gt;</span>学习1<span class="tag">&lt;/<span class="name">ABOUTLEARN</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ABOUTLIFE</span>&gt;</span>生活1<span class="tag">&lt;/<span class="name">ABOUTLIFE</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">HABIT</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">HABITLIST</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">NAME</span>&gt;</span>张三<span class="tag">&lt;/<span class="name">NAME</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ROOT</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>xml和Java对象的互相转换</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">beanToXml</span><span class="params">(Object obj,Class&lt;?&gt; load)</span> <span class="keyword">throws</span> JAXBException</span>&#123;</span><br><span class="line">        JAXBContext context = JAXBContext.newInstance(load);</span><br><span class="line">        Marshaller marshaller = context.createMarshaller();</span><br><span class="line">        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, <span class="keyword">true</span>);<span class="comment">//格式化xml</span></span><br><span class="line">        marshaller.setProperty(Marshaller.JAXB_ENCODING, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        StringWriter writer = <span class="keyword">new</span> StringWriter();</span><br><span class="line">        marshaller.marshal(obj,writer);</span><br><span class="line">        <span class="keyword">return</span> writer.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">xmlToBean</span><span class="params">(String xml,Class&lt;?&gt; load)</span> <span class="keyword">throws</span> JAXBException, IOException </span>&#123;</span><br><span class="line">        JAXBContext context = JAXBContext.newInstance(load);</span><br><span class="line">        Unmarshaller unmarshaller = context.createUnmarshaller();</span><br><span class="line">        Object unmarshal = unmarshaller.unmarshal(<span class="keyword">new</span> StringReader(xml));</span><br><span class="line">        <span class="keyword">return</span> unmarshal;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/%E6%90%AD%E5%BB%BAwebpack%E7%8E%AF%E5%A2%83/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/%E6%90%AD%E5%BB%BAwebpack%E7%8E%AF%E5%A2%83/" class="post-title-link" itemprop="url"> 搭建webpack环境		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 10:19:26" itemprop="dateCreated datePublished" datetime="2018-10-19T10:19:26+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/front/" itemprop="url" rel="index">
                    <span itemprop="name">front</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>webpack安装，可以参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36407748/article/details/80968300">webpack4.0安装</a><br>最好是本地安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm/cnpm install --save-dev webpack</span><br><span class="line">//如果是4.x还要安装webpack-cli</span><br><span class="line">npm/cnpm install --save-dev webpack-cli</span><br></pre></td></tr></table></figure>
<p>安装webpack-dev-server</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm/cnpm install --save-dev webpack-dev-server</span><br></pre></td></tr></table></figure>
<p>在package.json里的scripts里面添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dev&quot;</span>:<span class="string">&quot;webpack-dev-server --open --config webpack.config.js&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>--open</code>表示启动之后打开浏览器<br><code>--config</code>表示配置文件的地址<br>在当前目录下新建<code>webpack.config.js</code><br>写入如下内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;&#125;;</span><br><span class="line">moudule.exports = config;</span><br></pre></td></tr></table></figure>

<p>使用命令行执行<code>npm run dev</code>就会启动本地服务器</p>
<p>webpack配置最重要也是必选的两项是入口(entry)和出口(output)，入口是告诉webpack从哪里开始寻找依赖，并且编译，出口则是用来配置编译后的文件存储位置和文件名<br>在目录下新建一个空的main.js作为入口文件，然后在webpack.config.js中进行配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">	<span class="attr">entry</span>: &#123;</span><br><span class="line">		<span class="attr">main</span>: <span class="string">&#x27;./main&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">output</span>: &#123;</span><br><span class="line">		<span class="attr">path</span>: path.join(__dirname,<span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">		<span class="attr">publicPath</span>: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">		<span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure>

<ul>
<li>entry中的main是配置的单入口，webpack会从main.js开始工作</li>
<li>output中的path选项用来存放打包文件的输出目录（必填）</li>
<li>publicPath指定资源文件引用的目录，可以填CDN的网址</li>
<li>filename指定输出文件的名称</li>
</ul>
<p>然后在根目录下新建一个index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">		这是一个主页</span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>执行<code>npm run dev</code>将本地服务器跑起来，会看到这是一个主页<br>然后在main.js中加入</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;app&#x27;</span>).innerHTML = <span class="string">&#x27;Hello webpack&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>再到网页上看，页面显示已经变成了 webpack，修改了main.js中的内容之后，webpack会自动编译并刷新浏览器<br>webpack通过一个websocket来实时响应代码的修改<br>没有编译之前，代码是存在于内存中的，可以使用下面的代码，按照之前的配置输出到目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">webpack --progress --hide-modules</span><br></pre></td></tr></table></figure>
<h2 id="完善配置"><a href="#完善配置" class="headerlink" title="完善配置"></a>完善配置</h2><p>webpack可以通过按照不同的加载器对不同后缀名的文件进行处理，如写css就要用到css-loader和style-loader<br>可以通过下面了命令安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cnpm/npm insatll --save-dev css-loader</span><br><span class="line">cnpm/npm insatll --save-dev style-loader</span><br></pre></td></tr></table></figure>
<p>然后在配置文件里配置loader</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">	<span class="attr">entry</span>: &#123;</span><br><span class="line">		<span class="attr">main</span>: <span class="string">&#x27;./main&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">output</span>: &#123;</span><br><span class="line">		<span class="attr">path</span>: path.join(__dirname,<span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">		<span class="attr">publicPath</span>: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">		<span class="attr">filename</span>: <span class="string">&#x27;main.js&#x27;</span></span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">module</span>: &#123;</span><br><span class="line">		<span class="attr">rules</span>: [</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">				use: [</span><br><span class="line">					<span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">					<span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">				]</span><br><span class="line">			&#125;</span><br><span class="line">		]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure>
<p>moudule的rules属性可以指定一系列的loaders，每个loader都必须包含test和use两个选项</p>
<p>npm i ….. 批量安装<br>-D 等同于 –save-dev<br>-S 等同于 –save</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/vue/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/vue/" class="post-title-link" itemprop="url"> Vue-Learn</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 10:18:32" itemprop="dateCreated datePublished" datetime="2018-10-19T10:18:32+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/front/" itemprop="url" rel="index">
                    <span itemprop="name">front</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/">官网教程</a></p>
<hr>
<h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><p>挂载成功后通过$el来获取挂载的元素，</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>数据为双向绑定，即绑定的双方数据任何一方数据发生变化，另外一边会发生同样的变化<br><code>{{ }} </code> 为最基本的文本插值方式，可以使用元运算，做简单的运算<br>如：<code>{{ '123,123'.split(',') }} </code>，<code>{{ isSuccess?'成功':'失败' }} </code></p>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue只支持单个表达式，不支持语句和流控制，另外，在表达式中，不能使用用户自定义的全局变量，只能使用vue白名单的全局变量，如<span class="built_in">Math</span>和<span class="built_in">Date</span></span><br></pre></td></tr></table></figure>
<h3 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h3><p>可以在`{{ }} `加入管道对数据进行过滤(filters,methods)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;select&#125;&#125;</span><br><span class="line"><span class="attr">el</span>:<span class="string">&#x27;#element&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>:&#123;&#125;,</span><br><span class="line">filters&#123;</span><br><span class="line">    <span class="attr">select</span>:<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;.....&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>过滤器可以串联也可以接收参数<br>串联 <code>{{message |filterA|filterB}}</code><br>接收参数 <code>{{message |filterA('arg1','arg2')}} </code></p>
<h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><p>使用<code>v-on:绑定的事件</code>，如<code>v-on:click</code>，可以简写为语法糖<code>@click</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;show&quot;</span>&gt;</span>这是一段文字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span>点击隐藏<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;</span><br><span class="line">        <span class="attr">show</span>:<span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;</span><br><span class="line">        <span class="attr">toggle</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.show = !<span class="built_in">this</span>.show;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//methods中的方法可以互相调用，使用this.方法名称</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h3><p>需要对{{ }} 中的数据进行复杂处理的可以使用计算属性(computed)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;split1&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="attr">el</span>:<span class="string">&#x27;element&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>:&#123;&#125;,</span><br><span class="line">    <span class="attr">computed</span>:&#123;</span><br><span class="line">        <span class="attr">split1</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;....&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>两个vue示例的计算实例可以互相调用，使用实例名称.计算属性</p>
<h4 id="计算属性缓存"><a href="#计算属性缓存" class="headerlink" title="计算属性缓存"></a>计算属性缓存</h4><pre><code>计算属性是基于它的依赖缓存的，一个计算属性所依赖的数据发生变化时，它才会重新取值，所以只要text不改变，计算属性就不更新</code></pre><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>vue在渲染元素的时候，处于效率考虑，会尽可能的复用已有的元素而非从新渲染。如果要重新渲染，加上属性<code>key=&quot;&quot;</code></p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><ul>
<li>create : 实例创建完成后调用，此阶段完成了数据的观测，但尚未挂载，$el还不可用，一般用于初始化数据</li>
<li>mounted : el挂载到实例上后调用，一般业务逻辑从这开始</li>
<li>beforeDestroy : 实例销毁之前调用，主要解绑使用addEventListerner监听的事件<h2 id="内置语法"><a href="#内置语法" class="headerlink" title="内置语法"></a>内置语法</h2></li>
</ul>
<figure class="highlight nim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">v-html 插入html代码，而不是当做文本处理</span><br><span class="line">v-pre 如果想要显示&#123;&#123;&#125;&#125;使用这个标签跳过编译</span><br><span class="line">v-<span class="keyword">if</span> </span><br><span class="line">v-<span class="keyword">bind</span> 语法糖 :class 绑定元素的属性</span><br><span class="line">    例：&lt;<span class="keyword">div</span> :class=<span class="string">&quot;&#123;&#x27;active&#x27;:isActive&#125;&quot;</span>&gt;&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line">    当isActive为<span class="literal">true</span>时,这个<span class="keyword">div</span>拥有类名active，反之没有，也可以</span><br><span class="line">    一般绑定一个计算属性或者写在data中，也可以绑定一个<span class="type">Object</span>类型的数据，或者methods</span><br><span class="line">    需要多个class的时候可以使用数组语法，还可以使用三元表达式切换</span><br><span class="line">    例：&lt;<span class="keyword">div</span> :<span class="string">class&quot;[arg1,arg2]&quot;</span>&gt;&lt;/<span class="keyword">div</span>&gt;,data中写arg1和arg2的值</span><br><span class="line">    一般也应该使用计算属性，methods，等</span><br><span class="line">    :style 使用方法和:class类似，<span class="type">CSS</span>属性名称使用驼峰命名或者短横分隔命名</span><br><span class="line">    使用:style时，vue会自动给特殊的<span class="type">CSS</span>属性名称增加前缀，如transform</span><br><span class="line">v-cloak 不需要表达式，会在结束编译时从绑定的html上移除，常和<span class="type">CSS</span>的display:none使用，用得较少</span><br><span class="line">v-once 不需要表达式，定义它的元素或组件只渲染一次，包括元素或组件的所有子节点，首次渲染后，不再随数据的变化重新渲染，一般很少用到</span><br><span class="line">v-<span class="keyword">if</span>,v-<span class="keyword">if</span>-<span class="keyword">else</span>,v-<span class="keyword">else</span>,根据表达式的值在<span class="type">DOM</span>中渲染或销毁元素/组件</span><br><span class="line">    v-<span class="keyword">if</span>-<span class="keyword">else</span>要紧跟v-<span class="keyword">if</span>,v-<span class="keyword">else</span>要紧跟v-<span class="keyword">else</span>-<span class="keyword">if</span>或v-<span class="keyword">if</span>,表达式的值为真时，当前元素/组件及所有子节点将被渲染，为假时被移除</span><br><span class="line">    例：</span><br><span class="line">    &lt;p v-<span class="keyword">if</span>=<span class="string">&quot;status==1&quot;</span>&gt;这是第一行&lt;/p&gt;</span><br><span class="line">    &lt;p v-<span class="keyword">else</span>-<span class="keyword">if</span>=<span class="string">&quot;status==2&quot;</span>&gt;这是第二行&lt;/p&gt;</span><br><span class="line">    &lt;p v-<span class="keyword">else</span>=<span class="string">&quot;&quot;</span>&gt;这是第三行&lt;/p&gt;</span><br><span class="line">    <span class="keyword">var</span> app = new <span class="type">Vue</span>(&#123;</span><br><span class="line">    el:&#x27;<span class="comment">#app&#x27;,</span></span><br><span class="line">    data:&#123;</span><br><span class="line">        status:<span class="number">2</span>,</span><br><span class="line">    &#125;&#125;)//这里会显示第二行</span><br><span class="line">    v-<span class="keyword">if</span>可以配合&lt;<span class="keyword">template</span>&gt;&lt;/<span class="keyword">template</span>&gt;使用</span><br><span class="line">v-show 用法与v-<span class="keyword">if</span>基本一致，v-show是改变<span class="type">CSS</span>属性display,v-show值为<span class="literal">false</span>时，元素会隐藏，v-show不能在<span class="keyword">template</span>上使用</span><br><span class="line">v-<span class="keyword">for</span> 需要循环显示的时候用到v-<span class="keyword">for</span>，需结合<span class="keyword">in</span>/<span class="keyword">of</span>使用</span><br><span class="line">    例：&lt;temple v-<span class="keyword">for</span>=<span class="string">&quot;item in list&quot;</span>&gt;&#123;&#123;item&#125;&#125;&lt;/temple&gt;</span><br><span class="line">        还可以带一个参数表示元素位置</span><br><span class="line">        &lt;<span class="keyword">template</span> v-<span class="keyword">for</span>=<span class="string">&quot;(item,index) in list&quot;</span>&gt;&#123;&#123;index&#125;&#125;-&#123;&#123;item&#125;&#125;&lt;/<span class="keyword">template</span>&gt;</span><br><span class="line">    对象的属性也是可以遍历的，有两个可选参数key,value,如：(value,key,index) <span class="keyword">in</span> user</span><br><span class="line">    也可以用来迭代整数，item <span class="keyword">in</span> <span class="number">10</span></span><br><span class="line">    修改数组时，渲染的视图也会更新（双向绑定）</span><br><span class="line">        数组的一些操作方法：</span><br><span class="line">            push()</span><br><span class="line">            pop()</span><br><span class="line">            shift()</span><br><span class="line">            unshift()</span><br><span class="line">            splice()</span><br><span class="line">            sort()</span><br><span class="line">            reverse()</span><br><span class="line">        以上方法会改变原数组,以下方法不会</span><br><span class="line">            filter()</span><br><span class="line">            concat()</span><br><span class="line">            slice()</span><br><span class="line">    以下变动的数组中，vue是不能检测到的，也不会更新视图</span><br><span class="line">    - 通过索引直接设置项，如app.books[<span class="number">3</span>]=<span class="meta">&#123;..&#125;</span></span><br><span class="line">    - 修改数组长度，如app.books.length=<span class="number">1</span></span><br><span class="line">    第一个可以使用<span class="built_in">set</span>方法，<span class="type">Vue</span>.<span class="built_in">set</span>(app.books,<span class="number">3</span>,<span class="meta">&#123;....&#125;</span>),在webpack里写为this.$<span class="built_in">set</span>(app.books,<span class="number">3</span>,<span class="meta">&#123;...&#125;</span>),另一个方法，app.books.splice(<span class="number">3</span>,<span class="number">1</span>,<span class="meta">&#123;...&#125;</span>)，第二个问题也可以用splice</span><br><span class="line">    如果不想改变原数组，如过滤和排序，可以使用计算属性来返回过滤或排序后的数组</span><br><span class="line">    例：&lt;<span class="keyword">template</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in filterSort&quot;</span>&gt;&lt;/<span class="keyword">template</span>&gt;//这里的filterSort表示计算属性</span><br><span class="line">v-on 语法糖 @click 绑定元素的事件</span><br><span class="line">    例：&lt;a href=<span class="string">&quot;...&quot;</span> @click=<span class="string">&quot;login()&quot;</span>&gt;</span><br><span class="line">    click后的方法可以不写()，vue会按照默认的<span class="type">JavaScript</span>处理，vue还提供了一个特殊的变量$event，用于访问原生的<span class="type">DOM</span>事件</span><br><span class="line">    例：&lt;a href=<span class="string">&quot;...&quot;</span> @click=<span class="string">&quot;login(&#x27;登录成功&#x27;,$event)&quot;</span>&gt;可以在方法中调用事件如：preventDefult()</span><br><span class="line">    可以使用修饰符来指定事件,vue支持一下修饰符</span><br><span class="line">    - .stop</span><br><span class="line">    - .prevent</span><br><span class="line">    - .capture</span><br><span class="line">    - .self</span><br><span class="line">    - .once</span><br><span class="line">    如：&lt;a href=<span class="string">&quot;...&quot;</span> @click.stop=<span class="string">&quot;&quot;</span>&gt;</span><br><span class="line">    如果是键盘事件时，vue支持按键修饰符，和一些快捷名称如.enter .tab可以组合使用</span><br></pre></td></tr></table></figure>

<h3 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h3><ul>
<li>v-if和v-show的选择<br>具有相似的功能，但是v-if才是真的条件渲染，它会根据表达式适当的销毁或重建元素及绑定的事件或子组件，若表达式初始值为false,则元素一开始不会渲染，只有当条件第一次变为真的时候才会开始编译<br>而v-show只是简单的CSS属性切换，无论条件是否是真都会被编译，相比之下，v-if适合条件经常不变的场景，v-show适合频繁切换的条件</li>
</ul>
<p>  ​      </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/java%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/java%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url"> Java反射		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 09:52:39" itemprop="dateCreated datePublished" datetime="2018-10-19T09:52:39+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>参考：<a target="_blank" rel="noopener" href="http://www.journaldev.com/1789/java-reflection-example-tutorial#get-set-private-field">反射</a> <a target="_blank" rel="noopener" href="http://blog.csdn.net/liujiahan629629/article/details/18013523">字段</a><br>引用：<a target="_blank" rel="noopener" href="http://www.jianshu.com/p/5001b2add70b">方法</a> <a target="_blank" rel="noopener" href="http://www.cnblogs.com/LZL-student/p/5965991.html">构造方法</a></p>
<hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    AppResult a = <span class="keyword">new</span> AppResult();</span><br><span class="line">    Field[] fields = a.getClass().getDeclaredFields();<span class="comment">//拿到私有的字段</span></span><br><span class="line">    <span class="keyword">for</span> (Field f : fields)&#123;</span><br><span class="line">        System.out.println(f.getName());</span><br><span class="line">        AccessCheck annotation = f.getAnnotation(AccessCheck.class);</span><br><span class="line">        <span class="keyword">if</span> (annotation!=<span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span> (annotation.level().equals(<span class="string">&quot;1&quot;</span>))&#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    f.setAccessible(<span class="keyword">true</span>);  <span class="comment">//允许访问私有字段</span></span><br><span class="line">                    System.out.println(f.get(a)); <span class="comment">//拿到a对象中f字段的值</span></span><br><span class="line">                    f.set(a, <span class="string">&quot;3&quot;</span>);              <span class="comment">//设置a对象中f字段的值</span></span><br><span class="line">                    System.out.println(f.get(a));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对象：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AccessCheck(level = <span class="meta-string">&quot;1&quot;</span>)</span></span><br><span class="line"><span class="keyword">private</span> String levle = <span class="string">&quot;2&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>自定义注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(&#123;ElementType.FIELD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AccessCheck &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> &quot;&quot;</span>;</span><br><span class="line">    <span class="function">String <span class="title">level</span><span class="params">()</span> <span class="keyword">default</span> &quot;1&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">initReturnCode</span></span><br><span class="line">initReturnMsg</span><br><span class="line">initDetails</span><br><span class="line">levle</span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>
<hr>
<h2 id="反射详解"><a href="#反射详解" class="headerlink" title="反射详解"></a>反射详解</h2><p> 拿到对象的Class</p>
<ul>
<li>通过forName<br><code>Class&lt;?&gt; aClass = Class.forName(&quot;cn.ws.test.AppResult&quot;);</code></li>
<li>通过.class<br> <code>AppResult.class</code></li>
<li>通过.getClass<br> 这个是每个对象有的属性<br>  通过Class文件创建对象<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">caseTest</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Class&lt;?&gt; aClass = Class.forName(<span class="string">&quot;cn.ws.test.AppResult&quot;</span>);</span><br><span class="line">        System.out.println(aClass.getCanonicalName());<span class="comment">//拿到全限定名</span></span><br><span class="line">        Object o = aClass.newInstance();    <span class="comment">//创建对象（无参构造方法）</span></span><br><span class="line">        System.out.println(o);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="私有和公有"><a href="#私有和公有" class="headerlink" title="私有和公有"></a>私有和公有</h3><p>获取私有的字段，方法的值时需要先将允许访问私有设置为true，如下：<br><code>f.setAccessible(true);  //允许访问私有字段</code></p>
<h3 id="获取修饰符"><a href="#获取修饰符" class="headerlink" title="获取修饰符"></a>获取修饰符</h3><p>通过反射可以获取字段的修饰符<br><code>f.getModifiers()；</code><br>返回的是一个int类型，对应修饰符代表数字的和<br>如<code>private static String a</code>;<br>返回的值为10</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">PUBLIC:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">PRIVATE:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">PROTECTED:</span> <span class="number">4</span></span><br><span class="line"><span class="attr">STATIC:</span> <span class="number">8</span></span><br><span class="line"><span class="attr">FINAL:</span> <span class="number">16</span></span><br><span class="line"><span class="attr">SYNCHRONIZED:</span> <span class="number">32</span></span><br><span class="line"><span class="attr">VOLATILE:</span> <span class="number">64</span></span><br><span class="line"><span class="attr">TRANSIENT:</span> <span class="number">128</span></span><br><span class="line"><span class="attr">NATIVE:</span> <span class="number">256</span></span><br><span class="line"><span class="attr">INTERFACE:</span> <span class="number">512</span></span><br><span class="line"><span class="attr">ABSTRACT:</span> <span class="number">1024</span></span><br><span class="line"><span class="attr">STRICT:</span> <span class="number">2048</span></span><br></pre></td></tr></table></figure>

<p>这个方法在获取方法，类的修饰符也有效<br>字段的一些方法如下</p>
<h2 id="字段（Field-s）"><a href="#字段（Field-s）" class="headerlink" title="字段（Field/s）"></a>字段（Field/s）</h2><h3 id="获取字段"><a href="#获取字段" class="headerlink" title="获取字段"></a>获取字段</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Field<span class="literal">[]</span> fields = a.get<span class="constructor">Class()</span>.get<span class="constructor">DeclaredFields()</span>;<span class="comment">//获取对象中所有私有字段，加Declared的都是获取私有的</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">            Field initReturnMsg = a.get<span class="constructor">Class()</span>.get<span class="constructor">Field(<span class="string">&quot;initReturnMsg&quot;</span>)</span>;</span><br><span class="line">            <span class="comment">//获取指定的公共的字段，如这里的initReturnMsg</span></span><br><span class="line">        &#125; catch (NoSuchFieldException e) &#123;</span><br><span class="line">            e.print<span class="constructor">StackTrace()</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Field field : fields)&#123;</span><br><span class="line">            AccessCheck annotation = field.getAnnotation(AccessCheck.class);</span><br><span class="line">            System.out.println(field.getModifiers());;<span class="comment">//获取字段的修饰符</span></span><br><span class="line">            System.out.println(field.getName()); <span class="comment">//获取字段名</span></span><br><span class="line">            <span class="keyword">if</span> (annotation!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                <span class="keyword">if</span> (annotation.level().equals(<span class="string">&quot;1&quot;</span>))&#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        Class&lt;?&gt; type = field.getType();    <span class="comment">//获取字段类型</span></span><br><span class="line">                        System.out.println(<span class="string">&quot;是否相等：&quot;</span>+type.equals(String.class)); <span class="comment">//这个字段为String,输出为true</span></span><br><span class="line">                        field.setAccessible(<span class="keyword">true</span>);  <span class="comment">//允许访问私有字段</span></span><br><span class="line">                        System.out.println(field.get(a)); <span class="comment">//拿到a对象中f字段的值</span></span><br><span class="line">                        field.set(a, <span class="string">&quot;zasjfdals&quot;</span>);              <span class="comment">//设置a对象中f字段的值</span></span><br><span class="line">                        System.out.println(field.get(a));</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="方法（Method-s）"><a href="#方法（Method-s）" class="headerlink" title="方法（Method/s）"></a>方法（Method/s）</h2><h3 id="获取方法"><a href="#获取方法" class="headerlink" title="获取方法"></a>获取方法</h3><blockquote>
<p>只有通过方法签名才能找到唯一的方法，方法签名=方法名+参数列表（参数类型、参数个数、参数顺序）。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">        Class&lt;?&gt; appClass = Class.forName(<span class="string">&quot;cn.ws.test.AppResult&quot;</span>);</span><br><span class="line">        Method[] methods = appClass.getDeclaredMethods();   <span class="comment">//获取所有的方法(私有和公有)</span></span><br><span class="line">        Method[] methods1 = appClass.getMethods();  <span class="comment">//获取所有公共方法，包括父类的</span></span><br><span class="line">        Object o = appClass.newInstance();</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods)&#123;</span><br><span class="line">            method.getAnnotation(AccessCheck.class);<span class="comment">//获取方法上的注解</span></span><br><span class="line">            method.getModifiers();<span class="comment">//获取修饰符</span></span><br><span class="line">            System.out.println( method.getGenericReturnType());</span><br><span class="line">            System.out.println(method.getReturnType());</span><br><span class="line">            Class&lt;?&gt;[] parameterTypes = method.getParameterTypes(); <span class="comment">//拿到参数的类型</span></span><br><span class="line">            System.out.println(<span class="string">&quot;method name : &quot;</span>+method.getName() <span class="comment">//获取方法名</span></span><br><span class="line">                    +<span class="string">&quot; returnType : &quot;</span>+method.getReturnType()</span><br><span class="line">                    +<span class="string">&quot; ParameterTypes : &quot;</span>+Arrays.toString(parameterTypes)</span><br><span class="line">                    +<span class="string">&quot;&quot;</span></span><br><span class="line">            );<span class="comment">//获取返回类型</span></span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;------------------ln----------------&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods1)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;method name : &quot;</span>+method.getName()+<span class="string">&quot; returnType : &quot;</span>+method.getReturnType());</span><br><span class="line">        &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> testPrivateMethod returnType : <span class="keyword">class</span> java.lang.String ParameterTypes : [<span class="keyword">class</span> java.lang.String]</span><br><span class="line">void</span><br><span class="line">void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setDetails returnType : void ParameterTypes : [<span class="keyword">class</span> java.lang.Object]</span><br><span class="line">void</span><br><span class="line">void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setReturnCode returnType : void ParameterTypes : [<span class="keyword">class</span> java.lang.Object]</span><br><span class="line">void</span><br><span class="line">void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setReturnMsg returnType : void ParameterTypes : [<span class="keyword">class</span> java.lang.Object]</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getDetails returnType : <span class="keyword">class</span> java.lang.Object ParameterTypes : []</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getReturnCode returnType : <span class="keyword">class</span> java.lang.Object ParameterTypes : []</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getReturnMsg returnType : <span class="keyword">class</span> java.lang.Object ParameterTypes : []</span><br><span class="line"><span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> testPublicMethod returnType : <span class="keyword">class</span> java.lang.String ParameterTypes : []</span><br><span class="line">------------------ln----------------</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setDetails returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setReturnCode returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> setReturnMsg returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getDetails returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getReturnCode returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getReturnMsg returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> testPublicMethod returnType : <span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> <span class="keyword">remove</span> returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> <span class="keyword">remove</span> returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> get returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> put returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> values returnType : <span class="keyword">interface</span> java.util.Collection</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> clone returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> clear returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> isEmpty returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> replace returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> replace returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> replaceAll returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> size returnType : int</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> entrySet returnType : <span class="keyword">interface</span> java.util.Set</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> putAll returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> putIfAbsent returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> keySet returnType : <span class="keyword">interface</span> java.util.Set</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> compute returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> computeIfAbsent returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> computeIfPresent returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> containsKey returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> containsValue returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> forEach returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getOrDefault returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> merge returnType : <span class="keyword">class</span> java.lang.Object</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> <span class="keyword">equals</span> returnType : boolean</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> toString returnType : <span class="keyword">class</span> java.lang.String</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> hashCode returnType : int</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> wait returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> wait returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> wait returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> getClass returnType : <span class="keyword">class</span> java.lang.Class</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> <span class="keyword">notify</span> returnType : void</span><br><span class="line"><span class="function"><span class="keyword">method</span> <span class="title">name</span> :</span> notifyAll returnType : void</span><br></pre></td></tr></table></figure>
<h3 id="获取指定的方法，并执行"><a href="#获取指定的方法，并执行" class="headerlink" title="获取指定的方法，并执行"></a>获取指定的方法，并执行</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void <span class="keyword">method</span><span class="constructor">Test1()</span> throws ClassNotFoundException, IllegalAccessException, InstantiationException, NoSuchMethodException, InvocationTargetException &#123;</span><br><span class="line">    Class&lt;?&gt; appClass = <span class="module-access"><span class="module"><span class="identifier">Class</span>.</span></span><span class="keyword">for</span><span class="constructor">Name(<span class="string">&quot;cn.ws.test.AppResult&quot;</span>)</span>;</span><br><span class="line">    Object o = appClass.<span class="keyword">new</span><span class="constructor">Instance()</span>;</span><br><span class="line">    Method testPrivateMethod = appClass.get<span class="constructor">DeclaredMethod(<span class="string">&quot;testPrivateMethod&quot;</span>,String.<span class="params">class</span>)</span>;<span class="comment">//拿到指定名称的方法,后面可以传参数类型，来指定拿哪个方法</span></span><br><span class="line">    testPrivateMethod.set<span class="constructor">Accessible(<span class="params">true</span>)</span>;</span><br><span class="line">    Object invoke = testPrivateMethod.invoke(o, <span class="string">&quot;1345&quot;</span>); <span class="comment">//重新传入参数，并执行方法</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(invoke);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">传入的参数为1345</span></span><br><span class="line"><span class="number">1345</span></span><br></pre></td></tr></table></figure>
<h3 id="调用静态方法和可变参数方法"><a href="#调用静态方法和可变参数方法" class="headerlink" title="调用静态方法和可变参数方法"></a>调用静态方法和可变参数方法</h3><blockquote>
<p>使用反射调用静态方法: public Object invoke(Object obj,Object… args);<br>如果底层方法是静态的，那么可以忽略指定的 obj参数。将obj参数设置为null即可。</p>
<p>使用反射调用可变参数的方法:<br>对于数组类型的引用类型的参数,底层会自动解包,为了解决该问题,我们使用Object的一维数组把实际参数包装起来.</p>
<p>(牢记)以后使用反射调用invoke方法,在传递实际参数的时候,无论是基本数据类型还是引用数据类型,也无论是可变参数类型,反正就是一切实际参数都包装在newObject[]{}中,就没问题。</p>
<p><code>m.invoke(方法底层所属对象,newObject[]&#123;实际参数&#125;);通用</code></p>
</blockquote>
<hr>
<h2 id="构造方法（Constructor-s）"><a href="#构造方法（Constructor-s）" class="headerlink" title="构造方法（Constructor/s）"></a>构造方法（Constructor/s）</h2><h3 id="获取构造方法"><a href="#获取构造方法" class="headerlink" title="获取构造方法"></a>获取构造方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">constructorTest</span><span class="params">()</span> <span class="keyword">throws</span> ClassNotFoundException, NoSuchMethodException </span>&#123;</span><br><span class="line">    Class&lt;?&gt; appClass = Class.forName(<span class="string">&quot;cn.ws.test.AppResult&quot;</span>);</span><br><span class="line">    Constructor&lt;?&gt; constructor = appClass.getConstructor(String.class);<span class="comment">//获取单个构造方法，非私有,不写默认是无参</span></span><br><span class="line">    Constructor&lt;?&gt;[] constructors = appClass.getConstructors();<span class="comment">//获取多个构造方法，非私有</span></span><br><span class="line">    Constructor&lt;?&gt; declaredConstructor = appClass.getDeclaredConstructor(); <span class="comment">//获取单个构造方法，可以获取私有的</span></span><br><span class="line">    Constructor&lt;?&gt;[] declaredConstructors = appClass.getDeclaredConstructors();<span class="comment">//获取所有的构造方法,包括私有</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用构造器创建对象"><a href="#使用构造器创建对象" class="headerlink" title="使用构造器创建对象"></a>使用构造器创建对象</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    对应上面获取构造方法</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">        AppResult o = (AppResult)declaredConstructor.newInstance(); <span class="comment">//使用无参构造器创建对象</span></span><br><span class="line">        AppResult o1 = (AppResult) constructor.newInstance(<span class="string">&quot;使用参数为String的构成器创建的对象&quot;</span>);</span><br><span class="line">        System.out.println(o);</span><br><span class="line">        System.out.println(o1);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>私有的构造器创建对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">            Constructor&lt;?&gt; privateConstrctor = appClass.getDeclaredConstructor(String.class, Object.class);</span><br><span class="line">            privateConstrctor.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">            AppResult o = (AppResult) privateConstrctor.newInstance(<span class="string">&quot;通过私有的构造器创建对象&quot;</span>,<span class="string">&quot;12356&quot;</span>);</span><br><span class="line">            System.out.println(o);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>构造器也可以实现方法中的一些东西，诸如拿到参数的类型等，还可以拿到构造器所在类的Class对象</p>
<hr>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Class&lt;?&gt; appClass = Class.forName(<span class="string">&quot;cn.ws.test.AppResult&quot;</span>);</span><br><span class="line">Class&lt;?&gt; superclass = appClass.getSuperclass().getSuperclass();<span class="comment">//拿到的是父类</span></span><br><span class="line">Type genericSuperclass = appClass.getSuperclass().getGenericSuperclass(); <span class="comment">//得到的是泛型的父类</span></span><br><span class="line">System.out.println(genericSuperclass <span class="keyword">instanceof</span> ParameterizedTypeImpl);</span><br><span class="line">System.out.println(superclass);</span><br><span class="line">System.out.println(genericSuperclass);</span><br></pre></td></tr></table></figure>
<p>结果如下：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span></span><br><span class="line"><span class="keyword">class</span> <span class="title">java.util.AbstractMap</span></span><br><span class="line"><span class="title">java.util.AbstractMap</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt;</span><br></pre></td></tr></table></figure>

<p>AppResult类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.ws.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.ws.annotation.AccessCheck;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppResult</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">HashMap</span> <span class="keyword">implements</span> <span class="title">AppResultInterface</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String initReturnCode = <span class="string">&quot;1&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String initReturnMsg = <span class="string">&quot;成功！&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object initDetails = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AccessCheck(level = &quot;1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String levle ;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AppResult</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnCode&quot;</span>,initReturnCode);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnMsg&quot;</span>,initReturnMsg);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;details&quot;</span>,initDetails);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AppResult</span><span class="params">(String returnCode,String returnMsg,Object details)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnCode&quot;</span>,returnCode);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnMsg&quot;</span>,returnMsg);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;details&quot;</span>,details);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">AppResult</span><span class="params">(String successMsg,Object successDetails)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnCode&quot;</span>,initReturnCode);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnMsg&quot;</span>,successMsg);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;details&quot;</span>,successDetails);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AppResult</span><span class="params">(String successMsg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnCode&quot;</span>,initReturnCode);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnMsg&quot;</span>,successMsg);</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;details&quot;</span>,initDetails);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDetails</span><span class="params">(Object details)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;details&quot;</span>,details);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReturnCode</span><span class="params">(Object returnCode)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnCode&quot;</span>,returnCode);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setReturnMsg</span><span class="params">(Object returnMsg)</span></span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.put(<span class="string">&quot;returnMsg&quot;</span>,returnMsg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getDetails</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.get(<span class="string">&quot;details&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getReturnCode</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.get(<span class="string">&quot;returnCode&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getReturnMsg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.get(<span class="string">&quot;returnMsg&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">testPrivateMethod</span><span class="params">(String arg)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;传入的参数为&quot;</span>+arg);</span><br><span class="line">        <span class="keyword">return</span> arg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">testPublicMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;654321&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/%E8%8E%B7%E5%8F%96properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/%E8%8E%B7%E5%8F%96properties%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="post-title-link" itemprop="url"> 获取properties配置文件		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 09:51:00" itemprop="dateCreated datePublished" datetime="2018-10-19T09:51:00+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index">
                    <span itemprop="name">配置相关</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="通过FileInputStream获取"><a href="#通过FileInputStream获取" class="headerlink" title="通过FileInputStream获取"></a>通过FileInputStream获取</h2><p>注：FileInputStream是InputStream的子类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;src/main/resources/spring/test.properties&quot;</span>);</span><br><span class="line">Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">p.load(<span class="keyword">new</span> FileInputStream(file));</span><br><span class="line">String word = p.getProperty(<span class="string">&quot;word&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>上面第三步也可以直接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.load(<span class="keyword">new</span> FileInputStream(<span class="string">&quot;src/main/resources/spring/test.properties&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>路径问题：<br>这里的<code>src/main/resources/spring/test.properties</code>是相对路径，相对于工程的路径，也可以写绝对路径（加上盘符等等）。<br>如果写<code>/src/main/resources/spring/test.properties</code>表示工程所在盘符的下的这个路径，而不是工程路径下的<br>如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">File file = <span class="keyword">new</span> File(<span class="string">&quot;src/main/resources/spring/test.properties&quot;</span>);</span><br><span class="line">System.out.println(file.getAbsolutePath());</span><br><span class="line">File file1 = <span class="keyword">new</span> File(<span class="string">&quot;/src/main/resources/spring/test.properties&quot;</span>);</span><br><span class="line">System.out.println(file1.getAbsoluteFile());</span><br></pre></td></tr></table></figure>
<p>结果为：</p>
<pre><code>C:\Users\Administrator\IdeaProjects\project\src\main\resources\spring\test.properties
C:\src\main\resources\spring\test.properties</code></pre><p>注:</p>
<pre><code>p.load()可以传入的参数是Reader和InputStream</code></pre><hr>
<h2 id="通过ClassLoader类加载器获取"><a href="#通过ClassLoader类加载器获取" class="headerlink" title="通过ClassLoader类加载器获取"></a>通过ClassLoader类加载器获取</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream = a.getClass().getClassLoader().getResourceAsStream(<span class="string">&quot;spring/test.properties&quot;</span>);</span><br><span class="line">Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">p.load(resourceAsStream);</span><br><span class="line">String word = p.getProperty(<span class="string">&quot;word&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>这个方法是从classpath目录下加载的文件，比较方便</p>
<hr>
<h2 id="通过currentThread当前线程获取"><a href="#通过currentThread当前线程获取" class="headerlink" title="通过currentThread当前线程获取"></a>通过currentThread当前线程获取</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">InputStream resourceAsStream1 = Thread.currentThread().getContextClassLoader().getResourceAsStream(<span class="string">&quot;spring/test.properties&quot;</span>);</span><br><span class="line">    Properties p = <span class="keyword">new</span> Properties();</span><br><span class="line">    p.load(resourceAsStream1);</span><br><span class="line">    String word = p.getProperty(<span class="string">&quot;word&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这个也是通过classpath拿到的文件</p>
<hr>
<p>注：获取之后一定要<code>try catch finally</code> 关闭流资源</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://cononyc.gitee.io/2018/10/19/mysql%E8%A7%A6%E5%8F%91%E5%99%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="C.c">
      <meta itemprop="description" content="A Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Me">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/10/19/mysql%E8%A7%A6%E5%8F%91%E5%99%A8/" class="post-title-link" itemprop="url"> Mysql触发器		</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-10-19 09:49:37" itemprop="dateCreated datePublished" datetime="2018-10-19T09:49:37+08:00">2018-10-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-07-06 19:16:16" itemprop="dateModified" datetime="2021-07-06T19:16:16+08:00">2021-07-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TRIGGER</span> IF <span class="keyword">EXISTS</span> `before_insert_log`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> `before_insert_log` </span><br><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> `cc_log`</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span> <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span> a,b,c</span><br><span class="line">  <span class="keyword">INTO</span> @_a,@_b,@_c</span><br><span class="line">	<span class="keyword">FROM</span> abc aa</span><br><span class="line">	<span class="keyword">WHERE</span> aa.d <span class="operator">=</span> new.e;</span><br><span class="line">	<span class="keyword">SET</span> new.e<span class="operator">=</span>@_e,new.f<span class="operator">=</span>@_f,new.g<span class="operator">=</span>@_g;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>触发器可以设置给某表插入数据之前或者之后，</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BEFORE <span class="keyword">INSERT</span> <span class="keyword">ON</span> `cc_log`</span><br></pre></td></tr></table></figure>
<p>由before或者after决定，触发器中的变量不用事先声明，<br>注:每一个sql都必须结尾;<br>##给单个变量设置值<br>set a = (可以是单个结果的sql，也可以直接是个值)<br>##给多个变量设置值<br>如：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a,b,c</span><br><span class="line"><span class="keyword">INTO</span> @_a,@_b,@_c</span><br></pre></td></tr></table></figure>
<p>用into来给多个变量赋值，变量前最好加个@，两边不能加括号</p>
<h2 id="其他的语法"><a href="#其他的语法" class="headerlink" title="其他的语法"></a>其他的语法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IF a <span class="operator">&gt;</span> <span class="number">0</span> <span class="keyword">THEN</span> b<span class="operator">=</span><span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>注：有IF开头，必有END IF结尾</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">C.c</p>
  <div class="site-description" itemprop="description">A Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">52</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">20</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/CaseCy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;CaseCy" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://liquidcat.cc/" title="Blog → https:&#x2F;&#x2F;liquidcat.cc" rel="noopener" target="_blank"><i class="fa fa-fw fa-gratipay"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/cononyc" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;cononyc" rel="noopener" target="_blank"><i class="fa fa-fw fa-user-circle"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
  <div class="beian"><a href="http://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备2021018575号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">C.c</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
